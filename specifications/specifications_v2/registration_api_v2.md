# Спецификация: API Регистрации Пользователей v2

## Эндпоинт
`POST /api/v1/users/register`

## Описание
Создает новую учетную запись пользователя. Публичный метод.

## Бизнес-логика
1. **Уникальность:** Email и Телефон должны быть уникальными в системе.
2. **2FA Flow:** После валидации данных статус аккаунта — `PENDING`. Система отправляет SMS с OTP кодом на указанный `phone`.
3. **Безопасность пароля:**
    - Мин. 8 символов.
    - Обязательно: цифры, спецсимволы, заглавные буквы.
    - **Запрещено:** Содержать части email, имени или фамилии (case-insensitive, >3 символов).

## Тело запроса (Request Body)

| Поле | Тип | Обязательно | Ограничения | Описание |
|---|---|---|---|---|
| `email` | string | Да | Valid email (RFC 5322) | Уникальный логин. |
| `phone` | string | Да | E.164 формат (напр. +79990000000) | Для отправки SMS OTP. |
| `password` | string | Да | Мин. 8 символов | См. правила безопасности. |
| `full_name` | string | Да | 2-100 символов | ФИО пользователя. |

## Тело ответа (Response Body)

**201 Created**
```json
{
  "user_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "PENDING",
  "message": "OTP sent to +7***00"
}
```

## Пример запроса (Valid Payload)

```json
{
  "email": "alex.kid@example.com",
  "phone": "+79991234567",
  "password": "Strong#Pass99",
  "full_name": "Alex Kid"
}
```

> Пароль `Strong#Pass99` валиден: не содержит "Alex" или "Kid"

## Коды ошибок (Error Responses)

| Code | Описание |
|------|----------|
| 400  | Ошибка валидации (формат email/phone, сложность пароля, PII в пароле) |
| 409  | Email или телефон уже зарегистрированы |
| 429  | Too Many Requests (лимит 5/мин) |
| 500  | Внутренняя ошибка сервера |

---
