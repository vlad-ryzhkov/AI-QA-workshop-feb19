# SKILL.md — Шаблон инструментального навыка

> **Назначение:** Инструкция для типовой задачи. Нужно протестировать API — достаёт инструкцию "Как писать API-тесты". Нужно проверить UI — берёт другой инструмент.

## ⚠️ Лимит размера: ≤500 строк

**SKILL.md не должен превышать 500 строк.** Если больше — разбивай на:
- `references/*.md` — примеры, таблицы, чек-листы
- `scripts/*.py` — исполняемый код
- `.claude/qa-antipatterns/*.md` — анти-паттерны (общие для всех skills)

---

## Шаблон

```markdown
---
description: [Глагол] + [что] + [контекст]. Max 100 символов.
---

# /[skill-name] — [Название]

<purpose>
[1-2 предложения: что делает и для кого]
</purpose>

## Когда использовать
- [Триггер 1]
- [Триггер 2]

## Входные данные
- [Что нужно от пользователя]

## Алгоритм

### Шаг 1: [Название]
[Конкретные действия]

### Шаг 2: [Название]
[Конкретные действия]

### Шаг N: [Название]
[Конкретные действия]

## Формат вывода

```[язык]
[Шаблон результата]
```

## Quality Gates

- [ ] [Проверка 1]
- [ ] [Проверка 2]

## Связанные файлы (опционально)

- `scripts/[name]` — [назначение]
- `references/[name]` — [назначение]
```

---

## Progressive Disclosure

```
┌─────────────────────────────────────────────────────────┐
│ Уровень 1: YAML-заголовок                              │
│ → Всегда в системном промпте (< 100 символов)          │
├─────────────────────────────────────────────────────────┤
│ Уровень 2: Тело SKILL.md                               │
│ → Загружается при активации skill                      │
├─────────────────────────────────────────────────────────┤
│ Уровень 3: scripts/ и references/                      │
│ → Загружается по явному запросу                        │
└─────────────────────────────────────────────────────────┘
```

---

## Структура директории skill

```
.claude/skills/{skill-name}/
├── SKILL.md              # Уровни 1-2: заголовок + инструкция (≤500 строк)
├── scripts/              # Уровень 3: исполняемый код (опционально)
│   ├── generate.py
│   └── validate.sh
└── references/           # Уровень 3: документация (опционально)
    ├── checklist.md
    └── examples.json
```

### Реальный пример: screenshot-analyze

```
.claude/skills/screenshot-analyze/
├── SKILL.md                    # 335 строк — core логика
└── references/
    ├── cldr-tables.md          # CLDR справочники (валюты, числа, время)
    ├── checklists.md           # Полные чек-листы проверок
    └── html-template.md        # HTML шаблон отчёта
```

**Было:** 1031 строка в одном файле
**Стало:** 335 строк core + 3 reference файла

**Результат:** AI загружает только нужное по запросу

---

## Примеры description

**Хорошо:**
```yaml
description: Генерирует API автотесты на Kotlin с common-test-libs и JUnit 5
description: Анализирует спецификацию на противоречия и пробелы
description: Проверяет тесты на соответствие naming convention
```

**Плохо:**
```yaml
description: Этот навык предназначен для...  # слишком длинно
description: Помогает с тестированием        # слишком абстрактно
description: API тесты                        # нет глагола
```

---

## Категории skills

| Категория | Примеры | Типичный вывод |
|-----------|---------|----------------|
| **Analysis** | /spec-audit, /security-audit | Отчёт с findings |
| **Generation** | /testcases, /api-tests | Код или документ |
| **Validation** | /lint-tests, /check-coverage | Pass/Fail + детали |
| **Transformation** | /openapi-to-tests | Конвертация форматов |

---

## Полный гайд

`docs/ai-files-handbook.md` → Часть 3: Skills
