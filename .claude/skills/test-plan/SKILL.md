---
name: test-plan
description: –°–æ–∑–¥–∞—ë—Ç –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è –Ω–∞ –æ—Å–Ω–æ–≤–µ repo-scout-report. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç gaps –≤ —Å–ø–µ–∫–∞—Ö, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã endpoints –∏ roadmap. –ò—Å–ø–æ–ª—å–∑—É–π –ø–æ—Å–ª–µ /repo-scout –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QA. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π –±–µ–∑ recon-report.
allowed-tools: "Read Write Edit Glob Grep"
agent: agents/auditor.md
context: fork
---

## üîí SYSTEM REQUIREMENTS

–ü–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∞–≥–µ–Ω—Ç –û–ë–Ø–ó–ê–ù –∑–∞–≥—Ä—É–∑–∏—Ç—å: `.claude/protocols/gardener.md`

---

# /test-plan ‚Äî –ü–ª–∞–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

<purpose>
–ù–∞ –æ—Å–Ω–æ–≤–µ repo-scout-report –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç API surface, –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ–±–µ–ª—ã –≤ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è—Ö,
–ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∏—Ä—É–µ—Ç endpoints –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–æ–∑–¥–∞—ë—Ç actionable roadmap
–¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Å–µ—Ä–≤–∏—Å–∞ —Ç–µ—Å—Ç–∞–º–∏.
</purpose>

## –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ü–æ—Å–ª–µ `/repo-scout` ‚Äî –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
- –ü—Ä–∏ –≤—Ö–æ–¥–µ –≤ –Ω–æ–≤—ã–π —Å–µ—Ä–≤–∏—Å ‚Äî "—Å —á–µ–≥–æ –Ω–∞—á–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ?"
- –ü—Ä–∏ —Ä–µ–≤—å—é —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ ‚Äî "—á—Ç–æ –µ—â—ë –Ω–µ –ø–æ–∫—Ä—ã—Ç–æ?"

## –ö–æ–≥–¥–∞ –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

- –ë–µ–∑ `audit/repo-scout-report.md` ‚Äî —Å–Ω–∞—á–∞–ª–∞ `/repo-scout`
- –î–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π `/api-tests`
- –î–ª—è –∞—É–¥–∏—Ç–∞ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π `/spec-audit`

## –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

- `audit/repo-scout-report.md` (–æ—Ç `/repo-scout`) ‚Äî **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û**
- –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ (swagger, proto) ‚Äî –µ—Å–ª–∏ —É–∫–∞–∑–∞–Ω—ã –≤ recon-report
- CLAUDE.md —Ü–µ–ª–µ–≤–æ–≥–æ —Ä–µ–ø–æ ‚Äî –µ—Å–ª–∏ –µ—Å—Ç—å

## Input Validation (Process Isolation)

**–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã:**

1. –ü—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ `audit/repo-scout-report.md`:
   ```bash
   [ -f audit/repo-scout-report.md ] && echo "FOUND" || echo "NOT FOUND"
   ```

2. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–∞–π–¥–µ–Ω ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π –∏ –ø—Ä–æ–≤–µ—Ä—å —Å–µ–∫—Ü–∏–∏ 2-7 (API Surface, Spec Coverage, etc.)

3. –ï—Å–ª–∏ —Ñ–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Ä–∞–±–æ—Ç–∞–π –Ω–∞–ø—Ä—è–º—É—é –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤. –í—ã–≤–µ–¥–∏:
   ```
   ‚ÑπÔ∏è audit/repo-scout-report.md –Ω–µ –Ω–∞–π–¥–µ–Ω ‚Äî —Ä–∞–±–æ—Ç–∞—é –ø–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–∞–ø—Ä—è–º—É—é.
   ```
   –í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ: –§–∞–∑—É 1 (Intake –∏–∑ recon-report) –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å, —Å–ø–∏—Å–æ–∫ endpoints –∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏–∑–≤–ª–µ–∫–∞—Ç—å –∏–∑ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏.

## –ê–ª–≥–æ—Ä–∏—Ç–º

## Verbosity Protocol

**Structured Output Priority:** –í–µ—Å—å analysis –∏–¥—ë—Ç –≤ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç (MD/HTML), –Ω–µ –≤ —á–∞—Ç.

**Chat output (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è):**
- Brief Summary: max 5 —Å—Ç—Ä–æ–∫ (—á—Ç–æ –Ω–∞—à–ª–∏, —Å–∫–æ–ª—å–∫–æ, –∏—Ç–æ–≥)
- Findings table: max 15 —Å—Ç—Ä–æ–∫ (—Ç–æ–ø –ø–æ severity)
- –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç: `üìä –ü–æ–ª–Ω—ã–π –æ—Ç—á—ë—Ç: {path}` + –æ—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª

**Iterative steps:** –ù–µ –≤—ã–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É. Checkpoint —Ç–æ–ª—å–∫–æ –ø—Ä–∏:
- Phase transition (–§–∞–∑–∞ N ‚Üí –§–∞–∑–∞ N+1)
- Blocker –æ–±–Ω–∞—Ä—É–∂–µ–Ω
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ (SKILL COMPLETE)

**Tools first:**
- Grep ‚Üí table ‚Üí report, –±–µ–∑ "Now I will grep..."
- Read ‚Üí analyze ‚Üí report, –±–µ–∑ "The file shows..."

**Post-Check:** Inline –ø–µ—Ä–µ–¥ SKILL COMPLETE (5-7 —Å—Ç—Ä–æ–∫ checklist), –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª.

**–§–∞–∑—ã 1-4:** Silent. **–§–∞–∑–∞ 5:** Roadmap table + Self-Review –º–µ—Ç—Ä–∏–∫–∏.

### –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º

–ü—Ä–æ—á–∏—Ç–∞–π `.claude/qa_agent.md` (–µ—Å–ª–∏ –µ—Å—Ç—å –≤ —Ä–∞–±–æ—á–µ–º –ø—Ä–æ–µ–∫—Ç–µ). –í—ã–≤–µ–¥–∏:

```
üìã TASK BRIEF
‚îú‚îÄ Target: {repo-name} ‚Äî –ø–ª–∞–Ω —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è
‚îú‚îÄ Scope: {N REST + M gRPC endpoints} –∏–∑ repo-scout-report
‚îú‚îÄ Constraint: –ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ –±–∏–∑–Ω–µ—Å-–∫—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç–∏
‚îî‚îÄ Action: –í—ã–∑—ã–≤–∞—é /test-plan...
```

### –§–∞–∑–∞ 1: Intake

1. –ï—Å–ª–∏ `audit/repo-scout-report.md` –Ω–∞–π–¥–µ–Ω ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π –µ–≥–æ. –ò–∑–≤–ª–µ–∫–∏:
   - –ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫ endpoints (REST + gRPC) –∏–∑ —Å–µ–∫—Ü–∏–∏ 2
   - Specification coverage –∏–∑ —Å–µ–∫—Ü–∏–∏ 3
   - Existing tests –∏–∑ —Å–µ–∫—Ü–∏–∏ 4
   - Infrastructure context –∏–∑ —Å–µ–∫—Ü–∏–∏ 5
   - Readiness assessment –∏–∑ —Å–µ–∫—Ü–∏–∏ 7

4. –ï—Å–ª–∏ –µ—Å—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äî –ø—Ä–æ—á–∏—Ç–∞–π –∫–ª—é—á–µ–≤—ã–µ (swagger, proto) –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è business logic

### –§–∞–∑–∞ 2: Gap Analysis

**Specification Gaps:**

–î–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint –∏–∑ API Surface Catalog –ø—Ä–æ–≤–µ—Ä—å:
- –ï—Å—Ç—å –ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è? (swagger/proto –æ–ø–∏—Å—ã–≤–∞–µ—Ç —ç—Ç–æ—Ç endpoint)
- –ü–æ–ª–Ω–∞—è –ª–∏ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è? (response schemas, error codes, auth requirements)
- –ê–∫—Ç—É–∞–ª—å–Ω–∞ –ª–∏? (–¥–∞—Ç–∞ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ vs –∫–æ–¥)

–ö–ª–∞—Å—Å–∏—Ñ–∏—Ü–∏—Ä—É–π:
- **No Spec:** endpoint –µ—Å—Ç—å –≤ –∫–æ–¥–µ, –Ω–æ –Ω–µ—Ç –≤ swagger/proto
- **Partial Spec:** endpoint –µ—Å—Ç—å, –Ω–æ –±–µ–∑ response schemas –∏–ª–∏ error codes
- **Stale Spec:** endpoint –∏–∑–º–µ–Ω–∏–ª—Å—è –≤ –∫–æ–¥–µ, –Ω–æ spec –Ω–µ –æ–±–Ω–æ–≤–ª—ë–Ω
- **Complete:** —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª–Ω–∞—è –∏ –∞–∫—Ç—É–∞–ª—å–Ω–∞—è

**Test Coverage Gaps:**

–î–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint –ø—Ä–æ–≤–µ—Ä—å –Ω–∞–ª–∏—á–∏–µ —Ç–µ—Å—Ç–æ–≤:
- Unit —Ç–µ—Å—Ç—ã handler'–∞
- Integration —Ç–µ—Å—Ç—ã
- E2E/API —Ç–µ—Å—Ç—ã

### –§–∞–∑–∞ 3: Prioritization

–ü—Ä–æ—á–∏—Ç–∞–π `references/priority-model.md` –¥–ª—è –ø–æ–ª–Ω–æ–π –º–æ–¥–µ–ª–∏ —Ä–∞—Å—á—ë—Ç–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ (—Ñ–æ—Ä–º—É–ª–∞ Score, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ P0/P1/P2)

### –§–∞–∑–∞ 4: Architecture Recommendation

–ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ recon-report –æ–ø—Ä–µ–¥–µ–ª–∏:

**–ì–¥–µ —Ä–∞–∑–º–µ—â–∞—Ç—å —Ç–µ—Å—Ç—ã:**

| –°–∏—Ç—É–∞—Ü–∏—è | –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è |
|----------|-------------|
| –£–∂–µ –µ—Å—Ç—å –≤–Ω–µ—à–Ω–∏–π —Ç–µ—Å—Ç-—Ä–µ–ø–æ (indrive-api-tests-*) | –†–∞–±–æ—Ç–∞—Ç—å –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º |
| –ù–µ—Ç —Ç–µ—Å—Ç-—Ä–µ–ø–æ, —Å–µ—Ä–≤–∏—Å —Å REST API | –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π Kotlin —Ç–µ—Å—Ç-–ø—Ä–æ–µ–∫—Ç |
| –ù–µ—Ç —Ç–µ—Å—Ç-—Ä–µ–ø–æ, —Ç–æ–ª—å–∫–æ gRPC | –°–æ–∑–¥–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–π Go —Ç–µ—Å—Ç-–ø—Ä–æ–µ–∫—Ç –∏–ª–∏ Kotlin —Å gRPC |
| –ü—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–∏—Å —Å 1-5 endpoints | –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç—ã –≤ —Ç–æ–º –∂–µ —Ä–µ–ø–æ |

**–¢–µ—Å—Ç-—Å—Ç–µ–∫ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):**

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è |
|-----------|-----------|
| Language | Kotlin |
| HTTP Client | Ktor Client (CIO) |
| gRPC Client | grpc-kotlin |
| Assertions | Kotest matchers |
| Framework | JUnit 5 |
| Reporting | Allure |

### –§–∞–∑–∞ 5: Roadmap Assembly

–°–æ–±–µ—Ä–∏ execution roadmap —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —à–∞–≥–∞–º–∏ –∏ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ —Å–∫–∏–ª–ª—ã.

## –§–æ—Ä–º–∞—Ç –≤—ã–≤–æ–¥–∞

–ü–æ–ª–Ω—ã–π —à–∞–±–ª–æ–Ω –æ—Ç—á—ë—Ç–∞ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ ‚Äî –≤ `references/report-template.md`.

**–ö–ª—é—á–µ–≤—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. **–°–µ–∫—Ü–∏—è 3: Execution List for SDET** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏: #, Endpoint, HTTP Method, Spec Location, Test Scenarios, Context
2. **6 –∫–æ–ª–æ–Ω–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã** ‚Äî –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –≤ /api-tests
3. **–ü—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏—è:** P0 (Score ‚â•7) ‚Üí P1 (4-6) ‚Üí P2 (1-3)
4. **–§–æ—Ä–º—É–ª–∞ Score** –≤ –∫–∞–∂–¥–æ–π —Å–µ–∫—Ü–∏–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤

**–ó–ê–ü–†–ï–©–ï–ù–û:**
- –°–≤–æ–±–æ–¥–Ω–∞—è —Ñ–æ—Ä–º–∞ –≤–º–µ—Å—Ç–æ —Ç–∞–±–ª–∏—Ü—ã
- Placeholder'—ã `{xxx}` –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–µ–∫—Ü–∏–∏ "3. Execution List for SDET"

## Quality Gates

- [ ] repo-scout-report.md –ø—Ä–æ—á–∏—Ç–∞–Ω –∏ –≤—Å–µ endpoints —É—á—Ç–µ–Ω—ã
- [ ] –ö–∞–∂–¥—ã–π endpoint –∏–∑ API Surface –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ Priority Matrix
- [ ] Score —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –ø–æ —Ñ–æ—Ä–º—É–ª–µ (–ø–æ–∫–∞–∑–∞–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ —Å —á–∏—Å–ª–∞–º–∏)
- [ ] Specification Gaps —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω—ã —Å Spec Inventory –∏–∑ recon-report
- [ ] AI Setup Roadmap —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —à–∞–≥–∏ —Å–æ —Å–∫–∏–ª–ª–∞–º–∏
- [ ] –ù–µ—Ç placeholder'–æ–≤ `{xxx}` –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ—Ç—á—ë—Ç–µ

## Self-Check (Inline)

–ü–µ—Ä–µ–¥ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–æ–≤–µ—Ä—å:
- [ ] –í—Å–µ 7 —Å–µ–∫—Ü–∏–π –∑–∞–ø–æ–ª–Ω–µ–Ω—ã
- [ ] –°—É–º–º–∞ endpoints –≤ P0+P1+P2 = total –∏–∑ Scope Summary
- [ ] –ö–∞–∂–¥—ã–π gap –∏–º–µ–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π Action
- [ ] Roadmap —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π Readiness Assessment
- [ ] –í—Å–µ endpoints –∏–∑ recon-report —É—á—Ç–µ–Ω—ã
- [ ] Score —Ä–∞—Å—á—ë—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

## –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ

–ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è ‚Äî –Ω–∞–ø–µ—á–∞—Ç–∞–π –±–ª–æ–∫ `SKILL COMPLETE`:

```
‚úÖ SKILL COMPLETE: /test-plan
‚îú‚îÄ –ê—Ä—Ç–µ—Ñ–∞–∫—Ç—ã: audit/test-plan.md
‚îú‚îÄ Compilation: N/A
‚îú‚îÄ Upstream: audit/repo-scout-report.md
‚îî‚îÄ Endpoints: {P0+P1+P2}
```

## –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- –ú–æ–¥–µ–ª—å –ø—Ä–∏–æ—Ä–∏—Ç–∏–∑–∞—Ü–∏–∏: `references/priority-model.md`
- –í—Ö–æ–¥: `/repo-scout` ‚Üí `audit/repo-scout-report.md`
- –í—ã—Ö–æ–¥ ‚Üí `/init-project`, `/init-agent`, `/spec-audit`, `/testcases`, `/api-tests`
